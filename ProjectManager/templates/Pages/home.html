{% extends 'base.html' %}
{% load static %}
{% block css %}
{{ block.super }}
    <link rel="stylesheet" href="{% static 'css/home.css' %}" type="text/css">
    <link rel="stylesheet" href="{% static 'slick/slick.css' %}" type="text/css">
{% endblock %}
{% block scripts %}
{{ block.super }}
    <script src="{% static 'slick/slick.min.js' %}"></script>
    <script src="{% static 'js/home.js' %}"></script>
{% endblock %}
{% block title %}
Home
{% endblock %}

{% block content %}
<div id="home-content" class="pt-4">
    <!-- #region Giáo Viên quản lý-->
    {% if user.is_Manager%}
        <div class="row g-0">
            <div class="col-lg-6">
                <div class="box-l bg-color mx-xxl-5 mx-xl-4 mx-lg-4 mx-md-3 mx-2 p-3 p-sm-3 p-md-3 p-lg-4 p-xl-3 p-xxl-5">
                    <ul class="row nav nav-pills mb-3 controlls-list" id="pills-tab" role="tablist">
                        <li class="col-lg-0 col-6 nav-item" role="presentation">
                            <a class="nav-link btn-custom title btn-sm" id="pills-gv-tab" data-bs-toggle="pill" data-bs-target="#pills-gv" role="tab" aria-controls="pills-gv" aria-selected="true">Giáo Viên</a>
                        </li>
                        <li class="col-lg-0 col-6 nav-item " role="presentation">
                            <a class="nav-link title btn-sm" id="pills-sv-tab" data-bs-toggle="pill" data-bs-target="#pills-sv" role="tab" aria-controls="pills-sv" aria-selected="false">Sinh Viên</a>
                        </li>
                    </ul>
                    <div class="tab-content" id="pills-tabContent">
                        <div class="tab-pane fade w-100  mb-4" id="pills-sv" role="tabpanel" aria-labelledby="pills-sv-tab">
                            <div class="box-scroll p-xl-4 p-lg-4 p-md-3 p-sm-3 p-3 pt-4">
                                {% for u in Users_list_Manager %}
                                  {% if not u.is_Teacher %}
                                      <div class="box box-item scale-hover mb-4" onclick="">
                                        <div class="row p-xl-3 p-lg-3 p-md-3 p-sm-3 p-3">
                                          <div class="col-sm-2 mb-4 mb-md-0">
                                            <div class="student-pic w-100 h-100 p-md-0 p-1">
                                            </div>
                                          </div>
                                          <div class="col-sm-10">
                                            <div class="desc-student content">
                                              <h5 class="student-name">
                                                {{u.get_full_name}}
                                              </h5>
                                              <div class="student-infor">
                                                <p class="desc">Khoá: {{u.Class_id}}</p>
                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                  {% endif %}
                                {% endfor %}
                            </div>
                        </div>
                        <div class="tab-pane fade w-100 show active mb-4" id="pills-gv" role="tabpanel" aria-labelledby="pills-gv-tab">
                            <div class="box-scroll p-xl-4 p-lg-4 p-md-3 p-sm-3 p-3 pt-4">
                                {% for u in Users_list_Manager%}
                                  {% if u.is_Teacher%}
                                      <div class="box box-item scale-hover mb-4" onclick="">
                                        <div class="row p-xl-3 p-lg-3 p-md-3 p-sm-3 p-3">
                                          <div class="col-sm-2 mb-4 mb-md-0">
                                            <div class="teacher-pic w-100 h-100 p-md-0 p-1">
                                            </div>
                                          </div>
                                          <div class="col-sm-10">
                                            <div class="desc-teacher content">
                                              <h5 class="teacher-name">
                                                {{u.get_full_name}}
                                              </h5>
                                              <div class="teacher-infor">
                                                <p class="desc">thông tin giáo viên.</p>
                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                  {% endif %}
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3"></div>
            <div class="col-lg-3"></div>
        </div>
    <!-- #endregion -->
    <!--#region Giáo Viên phản Biện -->
    {% elif user.is_Reviewer %}
    <!-- #endregion -->
    <!-- #region Giáo viên -->
    {% elif user.is_Teacher %}
    <div class="box-l bg-color mx-xxl-5 mx-xl-4 mx-lg-4 mx-md-3 mx-2 p-3">
        {% if Projects_list_of_Teacher%}
        <p class="title fs-2">Danh sách được phân công</p>
        <div class="mb-2 input-group box search-box">
            <label class="search-label">tìm kiếm</label>
            <input id="ProjectSearchBox" type="text" class="input-search" placeholder="nhập gì đó">
        </div>
        <div id="ListTeacherProject" class="c-item">
            {%for p in Projects_list_of_Teacher%}
            <div id="{{p.id}}" class="box box-item bg-white me-5 p-3 scale-hover">
                <a href="/projectdetail/{{ p.id }}/" class="text-decoration-none">
                    <p><small class="text-muted">Khoa Công Nghệ thông Tin</small></p>
                    <p class="title fs-5 text-center">
                        {% if not p.Project_Name %}
                        Tên đề tài chưa cập nhật
                        {% else %}
                        {{p.Project_Name}}
                        {%endif%}
                    </p>
                    {% for u in p.Users.all%}
                    {% if not u.is_Teacher %}
                    <p class="card-text"><small class="text-muted">Sinh viên: <strong>{{u.get_full_name}}</strong></small></p>
                    {%endif%}
                    {%endfor%}
                    <span class="text-muted"><small>Khoá: {{p.schoolYear}}</small></span>
                </a>
            </div>
            {%endfor%}
        </div>
        {% else %}
        <div class="Waiting">
            <h1>Chưa có sinh viên nào được phân cho bạn! liên lạc người quản lý để phân sinh viên</h1>
        </div>
        {% endif %}
    </div>
    <!-- #endregion -->
    <!-- #region Sinh viên -->
    {% else %}
    {% if request_pj%}
    <div class="Request">
        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#ProjectRegister">Đăng kí đề tài</button>
    </div>
    {% else %}
    <div class="student-task-wrapper">
      <div class="row pb-5">
        <div class="col-12">
          <ul class="box-scroll list-unstyled py-0 mb-0 p-xxl-0 p-md-4 p-3">
            {% for st in Student_task %}
              <li id={{ st.id }} class="box box-item position-relative scale-hover mt-4 mx-xxl-5 mx-xl-0 mx-sm-3 mx-4">
                <a id='btn-tdel'
                  class="btn btn-danger btn-circle btn-circle-icon position-absolute top-0 start-100 translate-middle btn-anim">
                  <i class="fas fa-times"></i>
                </a>
                <div class="row p-xxl-2 p-3" data-bs-toggle="modal" data-bs-target="#TaskModal" data-bs-whatever="@edittask">
                  <div class="col-sm-2 d-flex">
                    <div id="tprio" class="box box-label w-100 h-100 p-2">
                      {{st.priority}}
                    </div>
                  </div>
                  <div class="col-sm-10 d-flex align-items-center">
                    <div class="line mx-xxl-3 mx-xl-2 mx-lg-2 mx-md-2"></div>
                    <div class="task-Content flex-fill ps-xxl-1 ps-3 mt-sm-0 mt-3">
                      <h3 id="tname">{{st.taskName}}
                      </h3>
                      <p id="tdesc">{{st.taskDesc}}</p>
                      <div class="row assignment-info">
                        <div class="col-md-6">
                          <div class="todoDate">{{st.deadline}}</div>
                        </div>
                        <div id="daysleft" class="col-md-6">
                          NaN
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </li>
            {% endfor %}
              
            
          </ul>
        </div>
        
      </div>
    </div>
    <!-- {% if Is_Confirm%}
    <div class="row mb-3">
        <div class="Process-list-content">
            <section class="Project-Manager-wrapper">
                <div class="Project-header d-flex mb-4 justify-content-between">
                    <div class="Project-Tittle">
                        <h1 class="display-5 fw-bold">{{student_project_data.1}}</h1>
                    </div>
                    <div class="toolbar hide">
                        <form name="task-update-form" method="post" action=".">
                            {% csrf_token %}
                            <input id="taskcontent" type="hidden" name="taskcontent" value="" />
                            <input id="pjid" type="hidden" name="pjid" value="{{pk}}" />
                        </form>
                    </div>
                </div>
                <div class="task-wrapper">
                    <div class="todoScroll p-4">
                        {{student_project_data.2|safe}}
                    </div>
                </div>
            </section>
        </div>
    </div>
    {% else %}
    <div class="Waiting">
        <h1>Đang đợi Xác nhận</h1>
    </div>
    {% endif %} -->
    {% endif %}
    {% endif %}
    <!-- #endregion -->
    <!-- #region project register modal-->
    <div class="modal fade regprojectmodal" id="ProjectRegister" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="ProjectRegisterLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered modal-lg modal-fullscreen-lg-down ">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="ProjectRegisterLabel">Đăng Ký Dự Án</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="ProjectRegister" action="." method="POST">
                        {% csrf_token %}
                        <div class="form-floating mb-3">
                            {{ register_form.Project_Name }}
                            <label>Tên Đề Tài</label>
                        </div>
                        <div class="form-floating mb-3">
                            {{ register_form.Type }}
                            <label>Loại Đề Tài</label>
                        </div>
                        <div class="form-floating mb-3">
                            {{ register_form.schoolYear }}
                            <label>Khoá</label>
                        </div>
                        <div class="form-floating mb-3">
                            {{ register_form.description }}
                            <label>Mô Tả Đề Tài</label>
                        </div>
                        <div class="form-floating mb-3">
                            <select id="teacher" name="teacher" class="form-select" placeholder="Chỉ định giáo viên hướng dẫn">
                                <option value="" selected>---------</option>
                                {%for t in teacher%}
                                <option value="{{t.username}}">{{t.get_full_name}}</option>
                                {%endfor%}
                            </select>
                            <label>Giáo viên hướng dẫn mong muốn</label>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary mt-3 btn-lg" data-bs-dismiss="modal">Đóng</button>
                            <button type="submit" class="btn btn-primary mt-3 btn-lg">Đăng Ký</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!-- #endregion -->
</div>
{% endblock %}